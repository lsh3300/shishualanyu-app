# ç‚¹èµä¸è¯„è®ºåŠŸèƒ½ - å®Œæ•´å®æ–½æŒ‡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ä¸º"ä¸–è¯´è“è¯­"å¹³å°æ·»åŠ ç»Ÿä¸€çš„ç‚¹èµå’Œè¯„è®ºåŠŸèƒ½ï¼Œæ”¯æŒï¼š
- âœ… **äº§å“ç‚¹èµä¸è¯„è®º**
- âœ… **è¯¾ç¨‹ç‚¹èµä¸è¯„è®º**
- âœ… **æ–‡ç« ç‚¹èµä¸è¯„è®º**
- âœ… **è¯„è®ºå›å¤åŠŸèƒ½**ï¼ˆæ”¯æŒå¤šçº§å›å¤ï¼‰
- âœ… **è¯„è®ºç‚¹èµåŠŸèƒ½**

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### è¡¨ç»“æ„æ¦‚è§ˆ

| è¡¨å | è¯´æ˜ | ä¸»è¦å­—æ®µ |
|------|------|---------|
| `likes` | å†…å®¹ç‚¹èµè¡¨ | user_id, item_type, item_id |
| `comments` | è¯„è®ºè¡¨ | user_id, item_type, item_id, content, parent_id |
| `comment_likes` | è¯„è®ºç‚¹èµè¡¨ | user_id, comment_id |

### æ ¸å¿ƒç‰¹æ€§

1. **ç»Ÿä¸€è®¾è®¡**ï¼š
   - ä½¿ç”¨ `item_type` å­—æ®µåŒºåˆ†å†…å®¹ç±»å‹ï¼ˆproduct/course/articleï¼‰
   - ä½¿ç”¨ `item_id` å­˜å‚¨å¯¹åº”å†…å®¹çš„UUID
   - ä¸€å¼ è¡¨ç®¡ç†æ‰€æœ‰ç±»å‹çš„ç‚¹èµ/è¯„è®º

2. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•
   - `comments` è¡¨ä½¿ç”¨ `likes_count` å†—ä½™å­—æ®µæå‡æ’åºæ€§èƒ½
   - è§¦å‘å™¨è‡ªåŠ¨ç»´æŠ¤è¯„è®ºç‚¹èµæ•°

3. **å®‰å…¨ç­–ç•¥**ï¼š
   - RLSç­–ç•¥ä¿æŠ¤æ•°æ®å®‰å…¨
   - ç”¨æˆ·åªèƒ½ä¿®æ”¹/åˆ é™¤è‡ªå·±çš„ç‚¹èµå’Œè¯„è®º
   - æ‰€æœ‰äººå¯ä»¥æŸ¥çœ‹å·²å‘å¸ƒçš„å†…å®¹

4. **æ‰©å±•æ€§**ï¼š
   - æ”¯æŒè¯„è®ºå›å¤ï¼ˆ`parent_id` å­—æ®µï¼‰
   - æ”¯æŒè¯„è®ºçŠ¶æ€ç®¡ç†ï¼ˆpublished/hidden/deletedï¼‰
   - é¢„ç•™å­—æ®µç”¨äºæœªæ¥åŠŸèƒ½æ‰©å±•

---

## ğŸš€ æ­¥éª¤ 1ï¼šåœ¨ Supabase æ‰§è¡Œ SQL è„šæœ¬

### âš ï¸ è¿™æ˜¯å¿…é¡»çš„ç¬¬ä¸€æ­¥ï¼

#### æ“ä½œæ­¥éª¤ï¼š

1. **ç™»å½• Supabase Dashboard**
   - è®¿é—® https://supabase.com/dashboard
   - é€‰æ‹©ä½ çš„é¡¹ç›®

2. **æ‰“å¼€ SQL Editor**
   - å·¦ä¾§èœå•æ‰¾åˆ° **SQL Editor**
   - ç‚¹å‡» **New query**

3. **æ‰§è¡Œå»ºè¡¨è„šæœ¬**
   - æ‰“å¼€æ–‡ä»¶ï¼š`supabase/likes-comments-schema.sql`
   - å¤åˆ¶å…¨éƒ¨å†…å®¹
   - ç²˜è´´åˆ° SQL Editor
   - ç‚¹å‡» **Run** æŒ‰é’®ï¼ˆæˆ–æŒ‰ Ctrl+Enterï¼‰

4. **éªŒè¯æ‰§è¡Œç»“æœ**

é¢„æœŸçœ‹åˆ°ï¼š
```
âœ“ BEGIN
âœ“ CREATE TABLE (3ä¸ªè¡¨)
âœ“ CREATE INDEX (å¤šä¸ªç´¢å¼•)
âœ“ CREATE POLICY (9ä¸ªç­–ç•¥)
âœ“ COMMIT

éªŒè¯ç»“æœï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ table_name      â”‚ column_count â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ comment_likes   â”‚ 4            â”‚
â”‚ comments        â”‚ 10           â”‚
â”‚ likes           â”‚ 5            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¦‚æœæ‰§è¡Œå¤±è´¥ï¼š

**é”™è¯¯ï¼šè¡¨å·²å­˜åœ¨**
```sql
-- å…ˆåˆ é™¤æ—§è¡¨ï¼ˆâš ï¸ ä¼šä¸¢å¤±æ•°æ®ï¼‰
DROP TABLE IF EXISTS public.comment_likes CASCADE;
DROP TABLE IF EXISTS public.comments CASCADE;
DROP TABLE IF EXISTS public.likes CASCADE;

-- ç„¶åé‡æ–°æ‰§è¡Œå®Œæ•´è„šæœ¬
```

**é”™è¯¯ï¼šæƒé™ä¸è¶³**
- ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯é¡¹ç›®æ‰€æœ‰è€…è´¦å·
- æˆ–åœ¨ Supabase è®¾ç½®ä¸­æ£€æŸ¥ Database æƒé™

---

## ğŸ“¡ æ­¥éª¤ 2ï¼šAPI å±‚å®ç°

### API è®¾è®¡

#### 2.1 ç‚¹èµ API (`/api/likes`)

**åŠŸèƒ½**ï¼š
- `GET` - æŸ¥è¯¢æŒ‡å®šå†…å®¹çš„ç‚¹èµåˆ—è¡¨å’Œæ€»æ•°
- `POST` - æ·»åŠ ç‚¹èµ
- `DELETE` - å–æ¶ˆç‚¹èµ

**è¯·æ±‚å‚æ•°**ï¼š
```typescript
// GET: æŸ¥è¯¢ç‚¹èµ
?item_type=product&item_id=xxx

// POST: æ·»åŠ ç‚¹èµ
{
  "item_type": "product" | "course" | "article",
  "item_id": "uuid"
}

// DELETE: å–æ¶ˆç‚¹èµ
?item_type=product&item_id=xxx
```

#### 2.2 è¯„è®º API (`/api/comments`)

**åŠŸèƒ½**ï¼š
- `GET` - æŸ¥è¯¢æŒ‡å®šå†…å®¹çš„è¯„è®ºåˆ—è¡¨
- `POST` - å‘å¸ƒè¯„è®º
- `PUT` - ç¼–è¾‘è¯„è®º
- `DELETE` - åˆ é™¤è¯„è®º

**è¯·æ±‚å‚æ•°**ï¼š
```typescript
// GET: æŸ¥è¯¢è¯„è®º
?item_type=product&item_id=xxx&sort=latest&page=1&limit=20

// POST: å‘å¸ƒè¯„è®º
{
  "item_type": "product" | "course" | "article",
  "item_id": "uuid",
  "content": "è¯„è®ºå†…å®¹",
  "parent_id": "uuid" | null  // å›å¤æ—¶å¡«å†™çˆ¶è¯„è®ºID
}

// PUT: ç¼–è¾‘è¯„è®º
{
  "comment_id": "uuid",
  "content": "æ–°å†…å®¹"
}

// DELETE: åˆ é™¤è¯„è®º
?comment_id=xxx
```

#### 2.3 è¯„è®ºç‚¹èµ API (`/api/comment-likes`)

**åŠŸèƒ½**ï¼š
- `POST` - ç»™è¯„è®ºç‚¹èµ
- `DELETE` - å–æ¶ˆè¯„è®ºç‚¹èµ

---

## ğŸ£ æ­¥éª¤ 3ï¼šHooks å±‚å®ç°

### 3.1 `hooks/use-likes.ts`

**æä¾›æ–¹æ³•**ï¼š
```typescript
const {
  // çŠ¶æ€
  likes,           // ç‚¹èµåˆ—è¡¨
  likesCount,      // ç‚¹èµæ€»æ•°
  isLiked,         // å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ
  isLoading,       // åŠ è½½çŠ¶æ€
  
  // æ–¹æ³•
  toggleLike,      // åˆ‡æ¢ç‚¹èµçŠ¶æ€
  fetchLikes,      // è·å–ç‚¹èµåˆ—è¡¨
  checkIsLiked,    // æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ
} = useLikes(itemType, itemId)
```

### 3.2 `hooks/use-comments.ts`

**æä¾›æ–¹æ³•**ï¼š
```typescript
const {
  // çŠ¶æ€
  comments,        // è¯„è®ºåˆ—è¡¨ï¼ˆæ ‘å½¢ç»“æ„ï¼‰
  totalCount,      // è¯„è®ºæ€»æ•°
  isLoading,       // åŠ è½½çŠ¶æ€
  hasMore,         // æ˜¯å¦è¿˜æœ‰æ›´å¤š
  
  // æ–¹æ³•
  addComment,      // å‘å¸ƒè¯„è®º
  updateComment,   // ç¼–è¾‘è¯„è®º
  deleteComment,   // åˆ é™¤è¯„è®º
  loadMore,        // åŠ è½½æ›´å¤š
  toggleCommentLike, // ç»™è¯„è®ºç‚¹èµ
} = useComments(itemType, itemId, options)
```

---

## ğŸ¨ æ­¥éª¤ 4ï¼šUI ç»„ä»¶å®ç°

### 4.1 ç‚¹èµæŒ‰é’®ç»„ä»¶

**æ–‡ä»¶**ï¼š`components/ui/like-button.tsx`

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºç‚¹èµå›¾æ ‡å’Œæ•°é‡
- ç‚¹å‡»åˆ‡æ¢ç‚¹èµçŠ¶æ€
- æœªç™»å½•æç¤º
- åŠ¨ç”»æ•ˆæœ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```tsx
<LikeButton
  itemType="product"
  itemId="product-uuid"
  initialLikesCount={10}
/>
```

### 4.2 è¯„è®ºåŒºç»„ä»¶

**æ–‡ä»¶**ï¼š`components/ui/comment-section.tsx`

**åŠŸèƒ½**ï¼š
- è¯„è®ºåˆ—è¡¨å±•ç¤º
- è¯„è®ºè¡¨å•
- å›å¤åŠŸèƒ½
- åˆ†é¡µåŠ è½½
- æ’åºåˆ‡æ¢ï¼ˆæœ€æ–°/æœ€çƒ­ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```tsx
<CommentSection
  itemType="course"
  itemId="course-uuid"
  title="è¯¾ç¨‹è¯„è®º"
/>
```

### 4.3 è¯„è®ºé¡¹ç»„ä»¶

**æ–‡ä»¶**ï¼š`components/ui/comment-item.tsx`

**åŠŸèƒ½**ï¼š
- å•æ¡è¯„è®ºæ˜¾ç¤º
- ç”¨æˆ·å¤´åƒå’Œåç§°
- è¯„è®ºæ—¶é—´
- ç‚¹èµæŒ‰é’®
- å›å¤æŒ‰é’®
- ç¼–è¾‘/åˆ é™¤ï¼ˆä»…ä½œè€…ï¼‰
- å­è¯„è®ºå±•ç¤º

### 4.4 è¯„è®ºè¡¨å•ç»„ä»¶

**æ–‡ä»¶**ï¼š`components/ui/comment-form.tsx`

**åŠŸèƒ½**ï¼š
- è¯„è®ºè¾“å…¥æ¡†
- å­—æ•°ç»Ÿè®¡ï¼ˆæœ€å¤š2000å­—ï¼‰
- æäº¤æŒ‰é’®
- è¡¨å•éªŒè¯

---

## ğŸ“± æ­¥éª¤ 5ï¼šé¡µé¢é›†æˆ

### 5.1 äº§å“è¯¦æƒ…é¡µ (`app/store/[id]/page.tsx`)

```tsx
import { LikeButton } from '@/components/ui/like-button'
import { CommentSection } from '@/components/ui/comment-section'

export default function ProductPage({ params }: { params: { id: string } }) {
  return (
    <div>
      {/* äº§å“ä¿¡æ¯ */}
      <div className="flex items-center gap-4">
        <h1>{product.name}</h1>
        <LikeButton itemType="product" itemId={product.id} />
      </div>
      
      {/* è¯„è®ºåŒº */}
      <CommentSection 
        itemType="product" 
        itemId={product.id}
        title="ç”¨æˆ·è¯„ä»·"
      />
    </div>
  )
}
```

### 5.2 è¯¾ç¨‹è¯¦æƒ…é¡µ (`app/teaching/[id]/page.tsx`)

```tsx
<LikeButton itemType="course" itemId={course.id} />
<CommentSection itemType="course" itemId={course.id} title="è¯¾ç¨‹è¯„ä»·" />
```

### 5.3 æ–‡ç« è¯¦æƒ…é¡µ (`app/culture/[slug]/page.tsx`)

```tsx
<LikeButton itemType="article" itemId={article.id} />
<CommentSection itemType="article" itemId={article.id} title="è¯»è€…è¯„è®º" />
```

---

## ğŸ§ª æ­¥éª¤ 6ï¼šæµ‹è¯•

### 6.1 æ•°æ®åº“æµ‹è¯•

åœ¨ Supabase SQL Editor ä¸­æµ‹è¯•ï¼š

```sql
-- 1. æ’å…¥æµ‹è¯•ç‚¹èµ
INSERT INTO likes (user_id, item_type, item_id)
VALUES (auth.uid(), 'product', 'your-product-uuid');

-- 2. æŸ¥è¯¢ç‚¹èµæ•°
SELECT item_type, item_id, COUNT(*) as likes_count
FROM likes
WHERE item_type = 'product' AND item_id = 'your-product-uuid'
GROUP BY item_type, item_id;

-- 3. æ’å…¥æµ‹è¯•è¯„è®º
INSERT INTO comments (user_id, item_type, item_id, content)
VALUES (auth.uid(), 'product', 'your-product-uuid', 'è¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯„è®º');

-- 4. æŸ¥è¯¢è¯„è®ºåˆ—è¡¨
SELECT 
  c.*,
  p.username,
  p.avatar_url
FROM comments c
LEFT JOIN profiles p ON p.id = c.user_id
WHERE c.item_type = 'product' 
  AND c.item_id = 'your-product-uuid'
  AND c.status = 'published'
ORDER BY c.created_at DESC;
```

### 6.2 åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] æœªç™»å½•çŠ¶æ€ç‚¹å‡»ç‚¹èµï¼Œæ˜¾ç¤º"è¯·å…ˆç™»å½•"æç¤º
- [ ] ç™»å½•åç‚¹å‡»ç‚¹èµï¼Œç‚¹èµæ•°+1ï¼Œå›¾æ ‡å˜è‰²
- [ ] å†æ¬¡ç‚¹å‡»ï¼Œå–æ¶ˆç‚¹èµï¼Œç‚¹èµæ•°-1
- [ ] å‘å¸ƒè¯„è®ºï¼Œè¯„è®ºç«‹å³æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- [ ] å›å¤è¯„è®ºï¼Œå›å¤æ˜¾ç¤ºåœ¨çˆ¶è¯„è®ºä¸‹æ–¹
- [ ] ç»™è¯„è®ºç‚¹èµï¼Œè¯„è®ºç‚¹èµæ•°+1
- [ ] ç¼–è¾‘è‡ªå·±çš„è¯„è®ºï¼Œå†…å®¹æ›´æ–°
- [ ] åˆ é™¤è‡ªå·±çš„è¯„è®ºï¼Œè¯„è®ºä»åˆ—è¡¨ç§»é™¤
- [ ] æ’åºåˆ‡æ¢ï¼ˆæœ€æ–°/æœ€çƒ­ï¼‰æ­£å¸¸å·¥ä½œ
- [ ] åˆ†é¡µåŠ è½½ï¼Œç‚¹å‡»"åŠ è½½æ›´å¤š"æ­£å¸¸

---

## ğŸ“Š æ•°æ®æµç¨‹å›¾

### ç‚¹èµæµç¨‹
```
ç”¨æˆ·ç‚¹å‡»ç‚¹èµæŒ‰é’®
    â†“
æ£€æŸ¥ç™»å½•çŠ¶æ€
    â†“
è°ƒç”¨ toggleLike()
    â†“
POST /api/likes (æˆ– DELETE)
    â†“
Supabase æ’å…¥/åˆ é™¤è®°å½•
    â†“
RLS ç­–ç•¥éªŒè¯
    â†“
è¿”å›æˆåŠŸ
    â†“
æ›´æ–° UI çŠ¶æ€
    â†“
æ˜¾ç¤ºåŠ¨ç”»æ•ˆæœ
```

### è¯„è®ºæµç¨‹
```
ç”¨æˆ·è¾“å…¥è¯„è®ºå†…å®¹
    â†“
ç‚¹å‡»å‘å¸ƒæŒ‰é’®
    â†“
è¡¨å•éªŒè¯ï¼ˆé•¿åº¦ã€å†…å®¹ï¼‰
    â†“
è°ƒç”¨ addComment()
    â†“
POST /api/comments
    â†“
Supabase æ’å…¥è®°å½•
    â†“
å…³è”ç”¨æˆ·ä¿¡æ¯
    â†“
è¿”å›æ–°è¯„è®º
    â†“
æ›´æ–°è¯„è®ºåˆ—è¡¨
    â†“
æ˜¾ç¤ºæˆåŠŸæç¤º
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### è¯„è®ºæ’åºæ–¹å¼
- `latest`: æŒ‰æ—¶é—´å€’åºï¼ˆæœ€æ–°åœ¨å‰ï¼‰
- `oldest`: æŒ‰æ—¶é—´æ­£åºï¼ˆæœ€æ—©åœ¨å‰ï¼‰
- `popular`: æŒ‰ç‚¹èµæ•°æ’åºï¼ˆæœ€çƒ­åœ¨å‰ï¼‰

### åˆ†é¡µé…ç½®
- é»˜è®¤æ¯é¡µ 20 æ¡è¯„è®º
- æ”¯æŒæ— é™æ»šåŠ¨æˆ–åˆ†é¡µæŒ‰é’®

### å­—æ•°é™åˆ¶
- è¯„è®ºï¼š1-2000 å­—ç¬¦
- å¯åœ¨å‰ç«¯è‡ªå®šä¹‰é™åˆ¶

---

## ğŸ¯ å¼€å‘ä¼˜å…ˆçº§

### Phase 1ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰- å¿…é¡»
- âœ… æ•°æ®åº“è¡¨åˆ›å»º
- âœ… ç‚¹èµ API
- âœ… è¯„è®º APIï¼ˆå‘å¸ƒã€æŸ¥è¯¢ã€åˆ é™¤ï¼‰
- âœ… ç‚¹èµæŒ‰é’®ç»„ä»¶
- âœ… è¯„è®ºåŒºåŸºç¡€ç»„ä»¶
- âœ… äº§å“è¯¦æƒ…é¡µé›†æˆ

### Phase 2ï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰- æ¨è
- è¯„è®ºç¼–è¾‘åŠŸèƒ½
- è¯„è®ºå›å¤åŠŸèƒ½
- è¯„è®ºç‚¹èµåŠŸèƒ½
- è¯„è®ºæ’åºåŠŸèƒ½
- è¯¾ç¨‹å’Œæ–‡ç« é¡µé›†æˆ

### Phase 3ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰- å¯é€‰
- è¯„è®ºä¸¾æŠ¥åŠŸèƒ½
- æ•æ„Ÿè¯è¿‡æ»¤
- å›¾ç‰‡ä¸Šä¼ ï¼ˆè¯„è®ºä¸­ï¼‰
- @æåŠç”¨æˆ·
- è¯„è®ºé€šçŸ¥æ¨é€

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ€§èƒ½ä¼˜åŒ–
- è¯„è®ºåˆ—è¡¨ä½¿ç”¨åˆ†é¡µï¼Œé¿å…ä¸€æ¬¡åŠ è½½è¿‡å¤šæ•°æ®
- ç‚¹èµæ•°ä½¿ç”¨å®æ—¶æŸ¥è¯¢æˆ–ç¼“å­˜
- è€ƒè™‘ä½¿ç”¨ Supabase Realtime å®ç°å®æ—¶æ›´æ–°

### 2. å®‰å…¨è€ƒè™‘
- æ‰€æœ‰ API å¿…é¡»éªŒè¯ç”¨æˆ·èº«ä»½
- è¯„è®ºå†…å®¹éœ€è¦è¿‡æ»¤ XSS æ”»å‡»
- é™åˆ¶è¯„è®ºå‘å¸ƒé¢‘ç‡ï¼ˆé˜²æ­¢åˆ·å±ï¼‰
- æ·»åŠ æ•æ„Ÿè¯è¿‡æ»¤

### 3. ç”¨æˆ·ä½“éªŒ
- æœªç™»å½•ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç‚¹èµæ•°å’Œè¯„è®º
- ç‚¹å‡»ç‚¹èµ/è¯„è®ºæ—¶æç¤ºç™»å½•
- æä¾›ä¹è§‚æ›´æ–°ï¼ˆå…ˆæ›´æ–° UI å†å‘é€è¯·æ±‚ï¼‰
- é”™è¯¯æ—¶å›æ»š UI çŠ¶æ€

### 4. æ•°æ®ä¸€è‡´æ€§
- ç‚¹èµæ•°é€šè¿‡å®æ—¶æŸ¥è¯¢ä¿è¯å‡†ç¡®
- è¯„è®ºç‚¹èµæ•°é€šè¿‡è§¦å‘å™¨è‡ªåŠ¨ç»´æŠ¤
- åˆ é™¤è¯„è®ºæ—¶çº§è”åˆ é™¤å­è¯„è®º

---

## ğŸ”— ç›¸å…³æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶
- âœ… `supabase/likes-comments-schema.sql` - æ•°æ®åº“è„šæœ¬
- âœ… `app/api/likes/route.ts` - ç‚¹èµ API
- âœ… `app/api/comments/route.ts` - è¯„è®º API
- âœ… `app/api/comment-likes/route.ts` - è¯„è®ºç‚¹èµ API
- âœ… `hooks/use-likes.ts` - ç‚¹èµ Hook
- âœ… `hooks/use-comments.ts` - è¯„è®º Hook
- âœ… `components/ui/like-button.tsx` - ç‚¹èµæŒ‰é’®
- âœ… `components/ui/comment-section.tsx` - è¯„è®ºåŒº
- âœ… `components/ui/comment-item.tsx` - è¯„è®ºé¡¹
- âœ… `components/ui/comment-form.tsx` - è¯„è®ºè¡¨å•

### ä¿®æ”¹æ–‡ä»¶
- âœ… `app/culture/[slug]/page.tsx` - æ–‡ç« è¯¦æƒ…é¡µ
- âœ… `components/templates/product-detail-template.tsx` - äº§å“è¯¦æƒ…æ¨¡æ¿
- âœ… `components/templates/course-detail-template.tsx` - è¯¾ç¨‹è¯¦æƒ…æ¨¡æ¿

---

## ğŸš€ å¼€å§‹å®æ–½

ç°åœ¨ä½ å¯ä»¥ï¼š

1. **ç«‹å³æ‰§è¡Œ SQL è„šæœ¬**ï¼ˆæœ€é‡è¦ï¼ï¼‰
   - æ‰“å¼€ `supabase/likes-comments-schema.sql`
   - åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œ

2. **ç­‰å¾…æˆ‘ç»§ç»­å¼€å‘**
   - æˆ‘å°†ä¾æ¬¡å®ç° APIã€Hooksã€ç»„ä»¶
   - æ¯ä¸ªæ­¥éª¤å®Œæˆåä¼šé€šçŸ¥ä½ 

3. **å‘Šè¯‰æˆ‘ä½ çš„éœ€æ±‚**
   - æ˜¯å¦éœ€è¦æŸäº›ç‰¹å®šåŠŸèƒ½ï¼Ÿ
   - æ˜¯å¦æœ‰è®¾è®¡åå¥½ï¼Ÿ
   - æ˜¯å¦éœ€è¦è°ƒæ•´ä¼˜å…ˆçº§ï¼Ÿ

---

**åˆ›å»ºæ—¶é—´**: 2025-11-23  
**å®Œæˆæ—¶é—´**: 2025-11-23  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¼€å‘ï¼Œç­‰å¾…æµ‹è¯•  
**ä¸‹ä¸€æ­¥**: å¯åŠ¨å¼€å‘æœåŠ¡å™¨æµ‹è¯•åŠŸèƒ½
