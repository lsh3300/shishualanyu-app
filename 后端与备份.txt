Next.jsä¸Supabaseé›†æˆéƒ¨ç½²å…¨æµç¨‹æŒ‡å—
1. Supabaseé¡¹ç›®åˆ›å»ºä¸é…ç½®
é¦–å…ˆéœ€è¦åœ¨Supabaseå¹³å°åˆ›å»ºåç«¯æœåŠ¡é¡¹ç›®ï¼š
æ³¨å†Œ/ç™»å½•Supabaseè´¦æˆ·
è®¿é—®Supabaseå®˜ç½‘å¹¶ç‚¹å‡»"Start your project"
ä½¿ç”¨GitHubè´¦å·æˆ–é‚®ç®±æ³¨å†Œ/ç™»å½•
åˆ›å»ºæ–°é¡¹ç›®
ç‚¹å‡»æ§åˆ¶å°å³ä¸Šè§’"New project"
å¡«å†™é¡¹ç›®åç§°(å¦‚"my-nextjs-app")
è®¾ç½®æ•°æ®åº“å¯†ç (åŠ¡å¿…å¦¥å–„ä¿å­˜)
é€‰æ‹©ç¦»ä½ ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨åŒºåŸŸ(å¦‚äºšå¤ªåŒºå¯é€‰æ–°åŠ å¡)
ç‚¹å‡»"Create new project" 

 
é¢„è§ˆ
Supabaseæ§åˆ¶å°åˆ›å»ºæ–°é¡¹ç›®ç•Œé¢

è·å–APIå‡­è¯
é¡¹ç›®åˆ›å»ºå®Œæˆå(çº¦2-5åˆ†é’Ÿ)ï¼Œè¿›å…¥"Project Settings" â†’ "API"
è®°å½•ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
Project URL (æ ¼å¼å¦‚https://xxxxxxxxx.supabase.co)
anon/public key (ç”¨äºå®¢æˆ·ç«¯è®¿é—®)
2. æœ¬åœ°Next.jsé¡¹ç›®é…ç½®
2.1 å®‰è£…Supabaseå®¢æˆ·ç«¯
bash
î˜“
å¤åˆ¶ä»£ç 
npm install @supabase/supabase-js
# æˆ–
yarn add @supabase/supabase-js
2.2 é…ç½®ç¯å¢ƒå˜é‡
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º.env.localæ–‡ä»¶ï¼š
env
î˜“
å¤åˆ¶ä»£ç 
NEXT_PUBLIC_SUPABASE_URL=ä½ çš„Supabaseé¡¹ç›®URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=ä½ çš„anon/public key
2.3 åˆ›å»ºSupabaseå®¢æˆ·ç«¯å·¥å…·æ–‡ä»¶
åœ¨lib/æˆ–utils/ç›®å½•ä¸‹åˆ›å»ºsupabaseClient.jsï¼š
javascript
î˜“
å¤åˆ¶ä»£ç 
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
3. æ•°æ®åº“è®¾è®¡ä¸é…ç½®
åˆ›å»ºæ•°æ®è¡¨
è¿›å…¥Supabaseæ§åˆ¶å°å·¦ä¾§"Table Editor"
ç‚¹å‡»"Create a new table"
ä¾‹å¦‚åˆ›å»ºç”¨æˆ·è¡¨ï¼š
sql
î˜“
å¤åˆ¶ä»£ç 
CREATE TABLE users (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  username TEXT NOT NULL,
  email TEXT NOT NULL UNIQUE
);
å¯ç”¨è¡Œçº§å®‰å…¨(RLS)
åœ¨è¡¨è®¾ç½®ä¸­å¯ç”¨"Enable Row Level Security"
ä¸ºä¸åŒæ“ä½œåˆ›å»ºç­–ç•¥(Policies)ï¼š
sql
î˜“
å¤åˆ¶ä»£ç 
-- å…è®¸è®¤è¯ç”¨æˆ·è¯»å–è‡ªå·±çš„æ•°æ®
CREATE POLICY "User can view their own data" 
ON users FOR SELECT USING (auth.uid() = id);

 
é¢„è§ˆ
Supabaseè¡Œçº§å®‰å…¨ç­–ç•¥é…ç½®ç•Œé¢

4. èº«ä»½éªŒè¯é›†æˆ
4.1 é…ç½®è®¤è¯æä¾›è€…
è¿›å…¥"Authentication" â†’ "Providers"
å¯ç”¨æ‰€éœ€ç™»å½•æ–¹å¼(Email/Google/GitHubç­‰)
å¯¹äºOAuthæä¾›è€…ï¼Œéœ€é…ç½®å›è°ƒURLï¼š
î˜“
å¤åˆ¶ä»£ç 
https://your-domain.com/api/auth/callback
4.2 å®ç°ç™»å½•åŠŸèƒ½
åˆ›å»ºç™»å½•ç»„ä»¶components/Auth.jsï¼š
javascript
î˜“
å¤åˆ¶ä»£ç 
import { supabase } from '../lib/supabaseClient'

export default function Auth() {
  const handleLogin = async (provider) => {
    const { error } = await supabase.auth.signInWithOAuth({
      provider: provider,
      options: {
        redirectTo: `${window.location.origin}/dashboard`
      }
    })
    if (error) console.error(error)
  }

  return (
    <div>
      <button onClick={() => handleLogin('github')}>
        Login with GitHub
      </button>
      <button onClick={() => handleLogin('google')}>
        Login with Google
      </button>
    </div>
  )
}
5. æ•°æ®æ“ä½œç¤ºä¾‹
5.1 æŸ¥è¯¢æ•°æ®
javascript
î˜“
å¤åˆ¶ä»£ç 
async function getPosts() {
  const { data, error } = await supabase
    .from('posts')
    .select('*')
    .order('created_at', { ascending: false })
  
  if (error) throw error
  return data
}
5.2 æ’å…¥æ•°æ®
javascript
î˜“
å¤åˆ¶ä»£ç 
async function addPost(title, content) {
  const { data, error } = await supabase
    .from('posts')
    .insert([
      { title, content, user_id: supabase.auth.user().id }
    ])
  
  if (error) throw error
  return data
}
6. éƒ¨ç½²ä¸ç”Ÿäº§ç¯å¢ƒé…ç½®
6.1 Verceléƒ¨ç½²
å°†é¡¹ç›®æ¨é€åˆ°GitHub/GitLabä»“åº“
ç™»å½•Vercelå¹¶å¯¼å…¥é¡¹ç›®
åœ¨ç¯å¢ƒå˜é‡è®¾ç½®ä¸­æ·»åŠ ï¼š
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY
6.2 ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®
åœ¨Supabase"Project Settings" â†’ "API"ä¸­ï¼š
é…ç½®CORSå…è®¸çš„ç”Ÿäº§åŸŸå
è€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰åŸŸå
åœ¨"Authentication" â†’ "URL Configuration"è®¾ç½®æ­£ç¡®çš„é‡å®šå‘URL
7. æµ‹è¯•ä¸éªŒè¯
åŠŸèƒ½æµ‹è¯•
æµ‹è¯•ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
éªŒè¯CRUDæ“ä½œæ˜¯å¦æ­£å¸¸
æ£€æŸ¥å®æ—¶è®¢é˜…åŠŸèƒ½(å¦‚å¯ç”¨)
æ€§èƒ½ç›‘æ§
åœ¨Supabase"Project Settings" â†’ "Database"ç›‘æ§èµ„æºä½¿ç”¨
è®¾ç½®è­¦æŠ¥é˜ˆå€¼
å®‰å…¨å®¡è®¡
æ£€æŸ¥æ‰€æœ‰è¡¨æ˜¯å¦å¯ç”¨RLS
éªŒè¯APIå¯†é’¥æœªåœ¨å‰ç«¯ç¡¬ç¼–ç 
ç¡®ä¿æ•æ„Ÿè·¯ç”±æœ‰èº«ä»½éªŒè¯ä¸­é—´ä»¶
å¸¸è§é—®é¢˜è§£å†³
é—®é¢˜	è§£å†³æ–¹æ¡ˆ
è®¤è¯å¤±è´¥	æ£€æŸ¥é‡å®šå‘URLæ˜¯å¦åŒ¹é…ï¼Œç¡®ä¿JWTå¯†é’¥æœªé‡ç½®
RLSç­–ç•¥å†²çª	ä½¿ç”¨supabase.rpc()è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ç»•è¿‡RLS(è°¨æ…ä½¿ç”¨)
å®æ—¶è¿æ¥æ–­å¼€	æ£€æŸ¥WebSocketè¿æ¥é™åˆ¶ï¼Œè€ƒè™‘å‡çº§è®¡åˆ’
å†·å¯åŠ¨å»¶è¿Ÿ	é…ç½®æ•°æ®åº“è¿æ¥æ± ï¼Œæˆ–ä½¿ç”¨Keep-Alive
é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨çš„Next.jsåº”ç”¨å°†æˆåŠŸé›†æˆSupabaseåç«¯æœåŠ¡ï¼Œå…·å¤‡å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæ•°æ®ç®¡ç†èƒ½åŠ›ã€‚






æ ¹æ®æ‚¨å½“å‰çš„æƒ…å†µï¼ˆå·²æœ‰é¡¹ç›®æ–‡ä»¶å¤¹ + å·²æ³¨å†ŒSupabaseè´¦æˆ·ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä¸ºæ‚¨è¯¦ç»†è¯´æ˜å…·ä½“æ“ä½œæ­¥éª¤ï¼š
ç¬¬ä¸€æ­¥ï¼šåœ¨é¡¹ç›®ä¸­å®‰è£… Supabase å®¢æˆ·ç«¯åº“
åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
bash
1
2
3
4
5
# å¦‚æœä½¿ç”¨ npm
npm install @supabase/supabase-js

# æˆ–è€…å¦‚æœä½¿ç”¨ yarn
yarn add @supabase/supabase-js

æ“ä½œè¯´æ˜ï¼š
â€¢	åœ¨VS Codeç­‰ä¸­ï¼šç‚¹å‡»èœå• ç»ˆç«¯ â†’ æ–°å»ºç»ˆç«¯ï¼Œæˆ–æŒ‰å¿«æ·é”® Ctrl+`
â€¢	åœ¨Finder/æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­ï¼šå³é”®ç‚¹å‡»é¡¹ç›®æ–‡ä»¶å¤¹ â†’ åœ¨ç»ˆç«¯ä¸­æ‰“å¼€
â€¢	å®‰è£…å®Œæˆåï¼Œæ‚¨ä¼šåœ¨package.jsonæ–‡ä»¶ä¸­çœ‹åˆ°@supabase/supabase-jsä¾èµ–é¡¹
ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env.local æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
env
1
2
NEXT_PUBLIC_SUPABASE_URL=æ‚¨çš„Supabaseé¡¹ç›®URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=æ‚¨çš„anon/public key
å¦‚ä½•è·å–è¿™äº›å€¼ï¼š
1.	ç™»å½• Supabase æ§åˆ¶å°
2.	è¿›å…¥æ‚¨çš„é¡¹ç›®
3.	ç‚¹å‡»å·¦ä¾§èœå• Settings â†’ API
4.	å¤åˆ¶ Project URL å’Œ anon public key
5.	ç²˜è´´åˆ°å¯¹åº”çš„ç¯å¢ƒå˜é‡ä¸­
é‡è¦æç¤ºï¼š
â€¢	ä¸è¦å°† .env.local æ–‡ä»¶æäº¤åˆ° Gitï¼ˆåº”æ·»åŠ åˆ° .gitignoreï¼‰
â€¢	ç¡®ä¿å˜é‡åå‰ç¼€æ˜¯ NEXT_PUBLIC_ï¼Œè¿™æ · Next.js æ‰èƒ½åœ¨å®¢æˆ·ç«¯ä½¿ç”¨
ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Supabase å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
åœ¨é¡¹ç›®ä¸­åˆ›å»º lib/supabaseClient.js æ–‡ä»¶ï¼ˆå¦‚æœ lib æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»ºå®ƒï¼‰ï¼š
javascript
1
2
3
4
5
6
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
ç¬¬å››æ­¥ï¼šæµ‹è¯•è¿æ¥ï¼ˆå¯é€‰ä½†æ¨èï¼‰
åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡µé¢ pages/test-supabase.js æ¥éªŒè¯è¿æ¥ï¼š
javascript
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
âŒ„
âŒ„
âŒ„
âŒ„
âŒ„
âŒ„
import { supabase } from '../lib/supabaseClient'

export default function TestSupabase() {
  const testConnection = async () => {
    try {
      const { data, error } = await supabase.from('users').select('*').limit(1)
      if (error) {
        console.error('Error:', error)
        alert('è¿æ¥å¤±è´¥: ' + error.message)
      } else {
        console.log('æˆåŠŸè¿æ¥ï¼æ•°æ®:', data)
        alert('è¿æ¥æˆåŠŸï¼')
      }
    } catch (err) {
      console.error('å¼‚å¸¸:', err)
      alert('å‘ç”Ÿé”™è¯¯: ' + err.message)
    }
  }

  return (
    <div>
      <h1>Supabase è¿æ¥æµ‹è¯•</h1>
      <button onClick={testConnection}>
        æµ‹è¯•æ•°æ®åº“è¿æ¥
      </button>
    </div>
  )
}
éªŒè¯æ­¥éª¤æ˜¯å¦æˆåŠŸ
1.	æ£€æŸ¥å®‰è£…ï¼šæŸ¥çœ‹ node_modules æ–‡ä»¶å¤¹æ˜¯å¦åŒ…å« @supabase ç›¸å…³æ–‡ä»¶
2.	æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼šç¡®ä¿ .env.local æ–‡ä»¶å·²åˆ›å»ºä¸”å€¼æ­£ç¡®
3.	æ£€æŸ¥å®¢æˆ·ç«¯æ–‡ä»¶ï¼šç¡®ä¿ lib/supabaseClient.js æ–‡ä»¶å¯æ­£å¸¸å¯¼å…¥
4.	è¿è¡Œæµ‹è¯•ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨ npm run devï¼Œè®¿é—® /test-supabase é¡µé¢ç‚¹å‡»æµ‹è¯•æŒ‰é’®
åç»­æ­¥éª¤å»ºè®®
å®Œæˆä¸Šè¿°åŸºç¡€é…ç½®åï¼Œæ¥ä¸‹æ¥åº”è¯¥ï¼š
1.	è®¾è®¡æ•°æ®åº“è¡¨ï¼šæ ¹æ®æ‚¨çš„åº”ç”¨éœ€æ±‚åœ¨ Supabase æ§åˆ¶å°åˆ›å»ºç›¸åº”çš„è¡¨
2.	å¯ç”¨è¡Œçº§å®‰å…¨ï¼šä¸ºæ¯ä¸ªè¡¨é…ç½® RLS ç­–ç•¥ç¡®ä¿æ•°æ®å®‰å…¨
3.	é›†æˆèº«ä»½éªŒè¯ï¼šæ·»åŠ ç™»å½•/æ³¨å†ŒåŠŸèƒ½
4.	å®ç°æ•°æ®æ“ä½œï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚ç¼–å†™ CRUD æ“ä½œ
å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¸¸è§çš„æ’æŸ¥ç‚¹ï¼š
â€¢	ç¯å¢ƒå˜é‡åç§°æ˜¯å¦æ­£ç¡®ï¼ˆå¿…é¡»æ˜¯ NEXT_PUBLIC_ å‰ç¼€ï¼‰
â€¢	Supabase é¡¹ç›® URL å’Œ key æ˜¯å¦å¤åˆ¶å®Œæ•´
â€¢	é¡¹ç›®æ˜¯å¦æ­£ç¡®é‡å¯ï¼ˆä¿®æ”¹ç¯å¢ƒå˜é‡åéœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨ï¼‰
â€¢	æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹è¿›è¡Œè¿™äº›æ“ä½œäº†ï¼å»ºè®®æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ¯å®Œæˆä¸€æ­¥å°±éªŒè¯ä¸€ä¸‹æ˜¯å¦æˆåŠŸã€‚






å®Œå…¨å¯ä»¥ç”¨å¤‡ä»½é¡¹ç›®æ–‡ä»¶æ¢å¤ï¼ è€Œä¸”ä¸éœ€è¦é‡æ–°åˆ›å»ºSupabaseé¡¹ç›®ï¼Œè¿™æ˜¯å®Œå…¨å¯ä»¥é¿å…çš„ã€‚è®©æˆ‘è¯¦ç»†è¯´æ˜æœ€ä½³å®è·µæ–¹æ¡ˆï¼š
ğŸ”„ é¡¹ç›®æ¢å¤çš„æ ¸å¿ƒåŸç†
å…³é”®ç‚¹ï¼šSupabaseé¡¹ç›®æ˜¯ç‹¬ç«‹äºå‰ç«¯ä»£ç çš„ï¼Œåªè¦APIå‡­è¯ä¸å˜ï¼Œä»»ä½•å‰ç«¯ä»£ç éƒ½å¯ä»¥è¿æ¥åˆ°åŒä¸€ä¸ªSupabaseåç«¯ã€‚
1
å‰ç«¯ä»£ç ï¼ˆå¯å¤‡ä»½/æ¢å¤ï¼‰ â†â†’ Supabaseäº‘ç«¯ï¼ˆæ•°æ®æŒä¹…ä¿å­˜ï¼‰
ğŸ“¦ å®Œæ•´å¤‡ä»½ç­–ç•¥
1. å‰ç«¯é¡¹ç›®å¤‡ä»½
bash
1
2
3
4
5
6
7
8
9
# ä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼ˆæœ€é‡è¦ï¼ï¼‰
git init
git add .
git commit -m "å®Œæ•´é¡¹ç›®å¤‡ä»½"
git remote add origin your-repo-url
git push -u origin main

# æœ¬åœ°å¤‡ä»½ï¼ˆé¢å¤–ä¿éšœï¼‰
cp -r your-project/ your-project-backup-2025-11-07/
2. Supabaseæ•°æ®å¤‡ä»½
â€¢	è‡ªåŠ¨å¤‡ä»½ï¼šSupabaseå…è´¹è®¡åˆ’åŒ…å«14å¤©çš„è‡ªåŠ¨å¤‡ä»½
â€¢	æ‰‹åŠ¨å¤‡ä»½ï¼š
bash
1
2
3
4
5
# å¯¼å‡ºæ•°æ®åº“ç»“æ„
supabase db dump --schema-only > schema.sql

# å¯¼å‡ºå®Œæ•´æ•°æ®ï¼ˆä»˜è´¹è®¡åˆ’ï¼‰
supabase db dump --data-only > data.sql
æˆ–åœ¨Supabaseæ§åˆ¶å°ï¼šDatabase â†’ Backups â†’ Create backup
3. ç¯å¢ƒå˜é‡å¤‡ä»½
åˆ›å»º env.backup æ–‡ä»¶ï¼ˆä¸è¦æäº¤åˆ°Gitï¼‰ï¼š
env
1
2
3
# æœ¬åœ°å¼€å‘ç¯å¢ƒå˜é‡å¤‡ä»½
NEXT_PUBLIC_SUPABASE_URL=your-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-key
ğŸš€ é¡¹ç›®æ¢å¤æ“ä½œæµç¨‹
æƒ…å†µ1ï¼šå‰ç«¯ä»£ç æŸåï¼Œéœ€è¦å®Œå…¨æ¢å¤
bash
1
2
3
4
5
6
7
8
9
10
11
12
# 1. ä»Gitæ¢å¤ä»£ç 
git clone your-repo-url my-project-restored
cd my-project-restored

# 2. é‡æ–°å®‰è£…ä¾èµ–
npm install

# 3. æ¢å¤ç¯å¢ƒå˜é‡
cp ../env.backup .env.local  # ä»å®‰å…¨ä½ç½®æ¢å¤

# 4. å¯åŠ¨é¡¹ç›®ï¼ˆè¿æ¥åˆ°åŸæœ‰Supabaseï¼‰
npm run dev
æƒ…å†µ2ï¼šéœ€è¦å›æ»šåˆ°å†å²ç‰ˆæœ¬
bash
1
2
3
4
5
6
7
8
# æŸ¥çœ‹å†å²æäº¤
git log --oneline

# å›æ»šåˆ°ç‰¹å®šç‰ˆæœ¬
git checkout <commit-hash>

# æˆ–åˆ›å»ºæ–°åˆ†æ”¯è¿›è¡Œä¿®å¤
git checkout -b fix-issue
æƒ…å†µ3ï¼šSupabaseæ•°æ®éœ€è¦æ¢å¤
1.	åœ¨Supabaseæ§åˆ¶å°ï¼šDatabase â†’ Backups
2.	é€‰æ‹©å¤‡ä»½æ—¶é—´ç‚¹
3.	ç‚¹å‡» Restoreï¼ˆä¼šåˆ›å»ºæ–°åˆ†æ”¯ï¼ŒåŸæ•°æ®ä¿ç•™ï¼‰
4.	éªŒè¯æ•°æ®åï¼Œå¯ä»¥åˆå¹¶å›ä¸»åˆ†æ”¯
ğŸ›¡ï¸ é¢„é˜²é—®é¢˜çš„æœ€ä½³å®è·µ
1. Gitåˆ†æ”¯ç­–ç•¥
bash
1
2
3
4
5
6
7
8
9
# å¼€å‘æ–°åŠŸèƒ½æ—¶
git checkout -b feature/new-feature

# ä¿®å¤bugæ—¶
git checkout -b fix/some-bug

# ç¨³å®šç‰ˆæœ¬
git checkout main  # ç”Ÿäº§ç¯å¢ƒ
git checkout staging  # é¢„å‘å¸ƒ
2. ç¯å¢ƒåˆ†ç¦»
åˆ›å»ºä¸åŒç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼š
1
2
3
.env.development  # æœ¬åœ°å¼€å‘
.env.staging      # æµ‹è¯•ç¯å¢ƒ  
.env.production  # ç”Ÿäº§ç¯å¢ƒ
3. è‡ªåŠ¨åŒ–å¤‡ä»½æ–¹æ¡ˆ
bash
1
2
3
4
5
6
# æ¯æ—¥è‡ªåŠ¨å¤‡ä»½è„šæœ¬ backup.sh
#!/bin/bash
DATE=$(date +%Y%m%d)
git add . && git commit -m "Auto backup $DATE"
supabase db dump > backup/db_$DATE.sql
zip -r backup/project_$DATE.zip .
4. Supabaseé¡¹ç›®ä¿æŠ¤
â€¢	å¯ç”¨æ•°æ®åº“åˆ†æ”¯ï¼šåœ¨Supabaseæ§åˆ¶å°å¼€å¯åˆ†æ”¯åŠŸèƒ½
â€¢	è®¾ç½®æ¢å¤ç‚¹ï¼šé‡è¦æ“ä½œå‰æ‰‹åŠ¨åˆ›å»ºå¤‡ä»½ç‚¹
â€¢	ä½¿ç”¨è¿æ¥æ± ï¼šé¿å…è¿æ¥æ•°è¶…é™å¯¼è‡´æœåŠ¡ä¸­æ–­
âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹
ä¸è¦è¿™æ ·åš âŒ
bash
1
2
3
4
5
# å±é™©ï¼ä¸è¦æäº¤.envæ–‡ä»¶åˆ°Git
git add .env.local

# å±é™©ï¼ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç Supabaseå¯†é’¥
const supabase = createClient("https://...", "hard-coded-key")
åº”è¯¥è¿™æ ·åš âœ…
javascript
1
2
3
4
5
// å®‰å…¨ï¼šä»ç¯å¢ƒå˜é‡è¯»å–
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
)
ğŸ”§ å¿«é€Ÿæ•…éšœæ¢å¤æµç¨‹
å½“é¡¹ç›®å‡ºç°é—®é¢˜æ—¶ï¼š
1.	ç«‹å³åœæ­¢ï¼šæš‚åœæœ‰é—®é¢˜çš„æ“ä½œ
2.	è¯„ä¼°å½±å“ï¼šæ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯æ•°æ®é—®é¢˜ï¼Ÿ
3.	é€‰æ‹©æ¢å¤æ–¹å¼ï¼š
â€¢	ä»£ç é—®é¢˜ â†’ Gitå›æ»š
â€¢	æ•°æ®é—®é¢˜ â†’ Supabaseå¤‡ä»½æ¢å¤
â€¢	é…ç½®é—®é¢˜ â†’ ç¯å¢ƒå˜é‡æ¢å¤
4.	éªŒè¯æ¢å¤ï¼šç¡®ä¿åŠŸèƒ½æ­£å¸¸
5.	åˆ†æåŸå› ï¼šé˜²æ­¢å†æ¬¡å‘ç”Ÿ
ğŸ’¡ é«˜çº§å»ºè®®
ä½¿ç”¨Dockerå®¹å™¨åŒ–ï¼š
dockerfile
1
2
3
4
5
6
7
8
9
# Dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
ENV NEXT_PUBLIC_SUPABASE_URL=$NEXT_PUBLIC_SUPABASE_URL
ENV NEXT_PUBLIC_SUPABASE_ANON_KEY=$NEXT_PUBLIC_SUPABASE_ANON_KEY
CMD ["npm", "run", "dev"]
é…ç½®CI/CDï¼š
â€¢	GitHub Actionsè‡ªåŠ¨éƒ¨ç½²
â€¢	Vercelé¢„è§ˆåˆ†æ”¯
â€¢	è‡ªåŠ¨åŒ–æµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡
æ€»ç»“ï¼šå®Œå…¨å¯ä»¥ç”¨å¤‡ä»½æ–‡ä»¶æ¢å¤é¡¹ç›®è€Œä¸å½±å“Supabaseåç«¯ã€‚å»ºç«‹å®Œå–„çš„Gitç‰ˆæœ¬æ§åˆ¶ + å®šæœŸSupabaseå¤‡ä»½ + ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œå°±èƒ½å®Œå…¨é¿å…é‡æ–°é…ç½®çš„éº»çƒ¦ã€‚å»ºè®®ç°åœ¨å°±å¼€å§‹è®¾ç½®è¿™äº›å¤‡ä»½æœºåˆ¶ï¼







