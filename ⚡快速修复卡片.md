# ⚡ 文章收藏快速修复卡片

## 🎯 代码已完全修复 ✅

所有代码修改已完成，**只需 1 步操作**即可完全修复！

---

## 🔥 唯一关键步骤（必须执行！）

### 在 Supabase 执行 SQL 脚本

**时间**: 3 分钟  
**难度**: ⭐ 简单

#### 操作步骤：

1. **登录 Supabase**
   - 访问 https://supabase.com/dashboard
   - 选择你的项目

2. **打开 SQL Editor**
   - 左侧菜单 → SQL Editor
   - 点击 "New query"

3. **复制粘贴脚本**
   - 打开文件: `supabase/fix-article-favorites-rls.sql`
   - 全选复制（Ctrl+A, Ctrl+C）
   - 粘贴到编辑器（Ctrl+V）

4. **执行**
   - 点击右下角 "Run" 按钮
   - 或按 Ctrl+Enter

5. **验证成功**
   - 看到 ✓ CREATE POLICY (3条)
   - 底部显示 3 条策略

---

## 🧪 测试（刷新后）

**Ctrl+Shift+R 刷新浏览器**

### 测试 1: 首页收藏
```
访问 http://localhost:3000
向下滚动到"文化速读"
悬停文章 → 点击❤️
✅ 应该显示"已收藏"
```

### 测试 2: 详情页收藏 ⭐ 新功能
```
访问任意文章详情页
点击"收藏文章"按钮
✅ 按钮变为"已收藏"
```

### 测试 3: 查看收藏列表
```
访问 /profile/favorites
点击"文章"标签
✅ 看到收藏的文章
```

---

## 📊 本次修复内容

| 项目 | 状态 |
|------|------|
| 首页实时获取文章 | ✅ 完成 |
| 所有卡片传递 UUID | ✅ 完成 |
| 详情页收藏按钮 | ✅ 完成 |
| 收藏页文章标签 | ✅ 完成 |
| RLS 策略脚本 | ⏳ 待执行 |

---

## 🆘 如果失败

### 检查 1: RLS 是否执行
```sql
-- 在 Supabase SQL Editor 执行
SELECT policyname FROM pg_policies 
WHERE tablename = 'article_favorites';

-- 应该看到 3 条结果
```

### 检查 2: 是否登录
- 确保在系统中已登录
- 未登录无法收藏

### 检查 3: 浏览器刷新
- 按 Ctrl+Shift+R 硬刷新
- 清除缓存

---

## 📁 详细文档

完整说明见：`【必读】文章收藏完整修复指南.md`

---

**关键**: ⚠️ 必须在 Supabase 执行 SQL 脚本！  
**文件**: `supabase/fix-article-favorites-rls.sql`  
**状态**: ✅ 代码完成 | ⏳ 等待执行 SQL
