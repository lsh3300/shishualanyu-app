# 🎮 游戏快速启动指南
## Quick Start Guide

**立即开始体验游戏！**

---

## ✅ 已修复的问题

1. ✅ 添加了顶部状态栏到游戏主页
2. ✅ 修复了创作工坊按钮链接
3. ✅ 调整了页面布局避免遮挡

---

## 🚀 启动步骤

### 第1步：启动开发服务器

在项目根目录运行：
```bash
npm run dev
```

等待服务器启动完成，看到：
```
✓ Ready in XXXms
○ Local:   http://localhost:3000
```

---

### 第2步：访问游戏页面

**选项A：直接访问游戏主页**
```
http://localhost:3000/game/hub
```

**选项B：直接访问游戏工坊**
```
http://localhost:3000/game/workshop
```

---

## 🎯 完整测试流程

### 1. 游戏主页 (`/game/hub`)

**应该看到**:
- ✅ 精美的水波背景
- ✅ 顶部状态栏（等级、经验、货币）
- ✅ 玩家统计卡片
- ✅ 四个功能入口卡片

**操作**:
- 点击"创作工坊"卡片 → 进入工坊

---

### 2. 游戏工坊 (`/game/workshop`)

**应该看到**:
- ✅ 顶部状态栏（实时显示数据）
- ✅ Canvas画布区域
- ✅ "添加测试图层"按钮
- ✅ "完成创作"按钮（初始禁用）
- ✅ 评分说明卡片

**操作流程**:

**步骤1**: 添加图层
```
点击 "➕ 添加测试图层" 按钮
→ 看到图层计数增加
→ 重复点击3-5次
```

**步骤2**: 完成创作
```
点击 "完成创作" 按钮
→ 看到 "评分中..." loading状态
→ 等待1-2秒
```

**步骤3**: 查看评分结果
```
弹出评分结果弹窗
→ 逐个显示4个维度分数
→ 显示总分和等级
→ 显示获得的奖励
→ 如果升级，显示升级提示
```

**步骤4**: 查看更新
```
点击 "继续" 关闭弹窗
→ 观察顶部状态栏
→ 经验值应该增加
→ 货币应该增加
→ 经验进度条应该移动
```

**步骤5**: 返回主页验证
```
点击 "返回大厅"
→ 回到 /game/hub
→ 查看玩家统计卡片
→ 数据应该已更新
```

---

## 📊 预期结果

### 首次访问
```
等级: Lv.1
经验: 0/100
货币: 0
作品: 0
```

### 完成一次创作后（假设获得A级）
```
等级: Lv.1 或 Lv.2 (如果经验够了)
经验: 70+ (取决于评分)
货币: 30+ (取决于评分)
作品: 1
```

### 多次创作后
```
等级: 逐渐提升
经验: 持续累积
货币: 不断增加
可能看到升级提示！🎉
```

---

## 🐛 遇到问题？

### 问题1：看不到玩家数据
**症状**: 状态栏和卡片都是空的或加载中

**原因**: 未登录或档案未创建

**解决**:
```
1. 确保你已经登录
2. 查看浏览器控制台是否有错误
3. 检查数据库中是否有 player_profile 记录
```

### 问题2：点击"完成创作"没反应
**症状**: 按钮不可点击或点击后没有弹窗

**原因**: 
- 没有添加图层
- API调用失败

**解决**:
```
1. 先点击"添加测试图层"按钮
2. 打开浏览器开发者工具查看Network标签
3. 查看是否有API错误
```

### 问题3：评分一直是loading
**症状**: 一直显示"评分中..."

**原因**: API请求失败

**解决**:
```
1. 检查控制台错误信息
2. 确认数据库函数已正确部署
3. 检查Supabase连接状态
```

### 问题4：页面显示不正常
**症状**: 布局混乱或组件重叠

**原因**: 样式加载问题

**解决**:
```
1. 清除浏览器缓存
2. 重启开发服务器
3. 检查Tailwind配置
```

---

## 🔍 调试技巧

### 查看控制台
```
打开浏览器开发者工具 (F12)
→ Console标签: 查看错误信息
→ Network标签: 查看API请求
→ Application标签: 查看本地存储
```

### 查看请求详情
```
在Network标签中:
1. 找到 "/api/game/score" 请求
2. 查看 Request Payload（发送的数据）
3. 查看 Response（返回的结果）
4. 检查Status Code（应该是200）
```

### 直接测试API
```
在控制台运行:
fetch('/api/game/score', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    cloth_id: 'test-123',
    layers: [{
      userId: 'test',
      textureId: 'test',
      params: { x: 0, y: 0, scale: 1, opacity: 1 },
      dyeDepth: 0.5,
      timestamp: new Date().toISOString()
    }]
  })
}).then(r => r.json()).then(console.log)
```

---

## 📱 测试清单

使用这个清单确保所有功能正常：

```
□ 能访问 /game/hub
□ 能看到顶部状态栏
□ 能看到玩家统计卡片（等级、经验、货币）
□ 能点击"创作工坊"进入工坊
□ 能看到工坊页面的Canvas区域
□ 能点击"添加测试图层"
□ 能点击"完成创作"
□ 能看到loading状态
□ 能看到评分结果弹窗
□ 能看到4个维度分数动画
□ 能看到总分和等级
□ 能看到奖励信息
□ 能关闭弹窗
□ 能看到顶部状态栏数据更新
□ 能返回主页
□ 能在主页看到更新后的数据
```

---

## 🎉 成功标志

如果你能完成以下操作，说明游戏系统完全正常：

✅ 1. 在主页看到自己的等级和货币  
✅ 2. 进入工坊创作（添加图层）  
✅ 3. 点击完成创作  
✅ 4. 看到评分结果弹窗（动画流畅）  
✅ 5. 获得经验和货币奖励  
✅ 6. 顶部状态栏实时更新  
✅ 7. 返回主页看到数据变化  
✅ 8. 多次创作后成功升级！🎉  

---

## 📞 还有问题？

如果遇到任何问题：

1. **截图**错误信息
2. **复制**控制台的错误日志
3. **告诉我**具体的操作步骤
4. 我会立即帮你解决！

---

**现在就开始测试吧！** 🚀

运行 `npm run dev` 然后访问：
- `http://localhost:3000/game/hub` (主页)
- `http://localhost:3000/game/workshop` (工坊)
